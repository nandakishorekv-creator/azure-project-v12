<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" 
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" 
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="leads-test-suite.xml" />
	<munit:test name="post-leads-flowTest" doc:id="kebnowxt-cmm9-peif-07kx-296fl9maodg" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="5lpwauxs-nw6c-vy7x-hpnj-dl7iae94txe" processor="salesforce:create">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-37df756f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[{
    "id": null,
    "items": [
        {
            "exception": null,
            "message": null,
            "payload": {
                "success": true,
                "id": "001xx000003AAA",
                "errors": []
            },
            "id": "001xx000003AAA",
            "statusCode": null,
            "successful": true
        }
    ],
    "successful": true
}]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="post-leads-flow" doc:id="8v3egfcd-f1dx-ruoj-wdcg-5n6tm417dn6" name="post-leads-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="5z5gve92-henf-z0mo-b4pd-8h1leefbyff" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="get-leads-flowTest" doc:id="hm9oc8c2-9yw7-uy2y-39q6-r728xj170a" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="6trq89hc-atff-8fqt-k1uk-z01kwhoym3m" processor="salesforce:query">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-3b59d6a7" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[
    {
        "Id": "001xx000003AAA",
        "Name": "Test Account",
        "Industry": "Technology"
    }
]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get-leads-flow" doc:id="o75zkunc-xspl-a2y9-pkqd-h1e5itsi0ym" name="get-leads-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="xrqeh5r0-lz64-cvib-oexp-zaj9l5bfl9f" actual="#[payload]" expected='#[{
  leads: payload.leads,
  id: payload.id,
  company: payload.company,
  firstName: payload.firstName,
  lastName: payload.lastName,
  email: payload.email,
  phone: payload.phone,
  status: payload.status,
  createdDate: payload.createdDate,
  count: payload.count
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="put-leads-flowTest" doc:id="pp0k3iv6-n8yf-056h-07rb-n8vb7epas6" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="aahpce3s-tg7k-um7d-7qsj-4o379ga3hsk" processor="salesforce:update">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-8a65c4cd" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[{"success": true, "id": "001xx000003AAA"}]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="put-leads-flow" doc:id="d2ooh0wd-xulz-1bni-9qlb-3xnlbw0b24" name="put-leads-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="ewnzwgz2-vtqb-n598-ps6u-gz1xh7y9764" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="delete-leads-flowTest" doc:id="zk376k6y-69lx-k4o7-j20t-vqc461h9p1" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="gub5oa21-vf1z-t6dq-ifys-xixh4p169vn" processor="salesforce:delete">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-b6581eaa" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[{"success": true}]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="delete-leads-flow" doc:id="b78r24o6-k9j5-gecp-2upv-9cqc8j86pi" name="delete-leads-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="3dmn1sry-0lzm-7v5o-0px5-z0nlp1bvet" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>

</mule>