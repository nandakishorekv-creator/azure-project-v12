<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" 
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" 
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="opportunities-test-suite.xml" />
	<munit:test name="post-opportunities-flowTest" doc:id="qhu7wka0-31dn-d3kt-4sih-jaep88e165e" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="1kio51d1-ozkr-ri6z-pack-tr1mpe43rxm" processor="salesforce:create">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-6867242a" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[{
    "id": null,
    "items": [
        {
            "exception": null,
            "message": null,
            "payload": {
                "success": true,
                "id": "001xx000003AAA",
                "errors": []
            },
            "id": "001xx000003AAA",
            "statusCode": null,
            "successful": true
        }
    ],
    "successful": true
}]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="post-opportunities-flow" doc:id="0etaj3ra-9jqb-2lxd-fztl-0ureudoqj5oh" name="post-opportunities-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="k6k5ts84-gmjd-brfm-as9h-9hfxn9a9ljl" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="get-opportunities-flowTest" doc:id="ltvr0bh8-vz9r-q4y3-vgdt-36hbtu7o6ct" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="ouyhoii7-njsx-nq0o-mget-s8lfl3nxjyc" processor="salesforce:query">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-05cf5e93" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[
    {
        "Id": "001xx000003AAA",
        "Name": "Test Account",
        "Industry": "Technology"
    }
]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="get-opportunities-flow" doc:id="wpwiq32t-ku7i-lapf-8v2m-wjkrseqw7u9" name="get-opportunities-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="rha4vr3x-j3kp-75ty-cgsn-x4yk322fn7o" actual="#[payload]" expected='#[{
  opportunities: payload.opportunities,
  id: payload.id,
  name: payload.name,
  stageName: payload.stageName,
  closeDate: payload.closeDate,
  amount: payload.amount,
  accountId: payload.accountId,
  description: payload.description,
  createdDate: payload.createdDate,
  count: payload.count
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="put-opportunities-flowTest" doc:id="80134q1r-n0ps-tlc3-sgzx-ty51wpc7aka" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="5cv4k5ni-li26-usdw-2xr5-0iw86hp1y84" processor="salesforce:update">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-fa126d6b" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[{"success": true, "id": "001xx000003AAA"}]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="put-opportunities-flow" doc:id="hl83aa7h-9udm-h0ep-1v3e-lt2o5glm5xe" name="put-opportunities-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="pdt8kltz-0wt8-vdrg-evi0-hfdw102wgqw" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>
		<munit:test name="delete-opportunities-flowTest" doc:id="qyvwia3u-zx5j-mh47-4fam-659myt6d5c8" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="op2u42ke-pk2d-rdah-ncqm-y94c7e61pma" processor="salesforce:delete">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="doc-7e113c2c" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[[{"success": true}]]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="delete-opportunities-flow" doc:id="a8mnuxgx-vfzq-wutf-5mab-szn74hzwiw8" name="delete-opportunities-flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="caebm4d0-0mzk-249s-5l94-tw60glf9ow9" actual="#[payload]" expected='#[{
  success: payload.success,
  id: payload.id,
  message: payload.message,
  errors: payload.errors
}]'/>
		</munit:validation>
	</munit:test>

</mule>